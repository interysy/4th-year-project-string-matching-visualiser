name : Automatic Testing & Linting
 
on:
    push:
      branches: ["main"] 
    pull_request:
      branches: [ "main" ]
  
    workflow_dispatch: 
   
jobs:
  build: 
    name : Build ðŸ”¨ and Test ðŸŽ¯
    runs-on: ubuntu-latest 
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      - name: Set up Node.js 
        uses: actions/setup-node@v3
        with:
          node-version: 18
      - name: Install dependencies 
        run: npm ci
      - name: Build Angular project 
        run: npm run build
      - name: Run tests 
        run: npm run test-headless
      - name : Upload code coverage  
        uses: actions/upload-artifact@v3
        with:
          name: code-coverage
          path: ./coverage/string-matching-visualiser/coverage-summary.json 
      - name : Coverage badge generation 
        uses:  demyanets/angular-coverage-badges-action@v1
        with:
          coverage-summary-path: coverage/string-matching-visualiser/coverage-summary.json
      - name : Lint Code   
        run: npm run lint 